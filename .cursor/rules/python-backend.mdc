---
description: Python backend â€” async, error handling, models, testing
globs:
  - "backend/**/*.py"
  - "mcp_server.py"
alwaysApply: false
---

# Python Backend

- All DB operations async (SQLite via aiosqlite). Use `asyncio.gather()` for parallel work; no blocking I/O in async functions.
- Wrap external calls (Neo4j, ChromaDB, Brave API) in try/except; log with context; degrade gracefully (WARNING, continue with available services).
- Pydantic for models; camelCase for API/exposed fields, snake_case in Python; `populate_by_name = True` where needed.
- Main app uses SQLite only. Verify optional services (Neo4j, ChromaDB) degrade gracefully. Use `python -c "..."` for quick DB checks.
